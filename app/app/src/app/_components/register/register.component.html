<div class="row mt-5">
  <div class="col-md-12">
    <form *ngIf="!isSuccessful" name="form" (ngSubmit)="f.form.valid && onSubmit()" #f="ngForm" novalidate>

      <div class="alert alert-warning" *ngIf="f.submitted && isSignUpFailed">
        Signup failed!<br />{{ errorMessage }}
      </div>

      <div class="alert alert-success" *ngIf="isSuccessful">
        Your registration is successful!
      </div>

      <div class="row">
        <div class="col-xs-12 col-sm-12 col-md-6 col-lg-6">
          <div class="form-group">
            <label for="name">Name</label>
            <input type="text" class="form-control" name="name" [(ngModel)]="form.name" required #name="ngModel" />
            <div class="alert-danger" *ngIf="f.submitted && name.invalid">
              <div *ngIf="name.errors.required">Name is required</div>
            </div>
          </div>
        </div>

        <div class="col-xs-12 col-sm-12 col-md-6 col-lg-6">
          <div class="form-group">
            <label for="surname">Surname</label>
            <input type="text"
                   class="form-control"
                   name="surname"
                   [(ngModel)]="form.surname"
                   required
                   #surname="ngModel" />
            <div class="alert-danger" *ngIf="f.submitted && surname.invalid">
              <div *ngIf="surname.errors.required">Surname is required</div>
            </div>
          </div>
        </div>
      </div>

      <div class="row">
        <div class="col-xs-12 col-sm-12 col-md-6 col-lg-6">
          <div class="form-group">
            <label for="username">Username</label>
            <input type="text"
                   class="form-control"
                   name="username"
                   [(ngModel)]="form.username"
                   required
                   minlength="3"
                   maxlength="20"
                   #username="ngModel" />
            <div class="alert-danger" *ngIf="f.submitted && username.invalid">
              <div *ngIf="username.errors.required">Username is required</div>
              <div *ngIf="username.errors.minlength">
                Username must be at least 3 characters
              </div>
              <div *ngIf="username.errors.maxlength">
                Username must be at most 20 characters
              </div>
            </div>
          </div>
        </div>
        <div class="col-xs-12 col-sm-12 col-md-6 col-lg-6">
          <div class="form-group">
            <label for="email">Email</label>
            <input type="email"
                   class="form-control"
                   name="email"
                   [(ngModel)]="form.email"
                   required
                   email
                   #email="ngModel" />
            <div class="alert-danger" *ngIf="f.submitted && email.invalid">
              <div *ngIf="email.errors.required">Email is required</div>
              <div *ngIf="email.errors.email">
                Email must be a valid email address
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="row">
        <div class="col-xs-12 col-sm-12 col-md-6 col-lg-6">
          <div class="form-group">
            <label for="password">Password</label>
            <input type="password"
                   class="form-control"
                   name="password"
                   [(ngModel)]="form.password"
                   required
                   minlength="6"
                   #password="ngModel" />
            <div class="alert-danger" *ngIf="f.submitted && password.invalid">
              <div *ngIf="password.errors.required">Password is required</div>
              <div *ngIf="password.errors.minlength">
                Password must be at least 6 characters
              </div>
            </div>
          </div>
        </div>
        <div class="col-xs-12 col-sm-12 col-md-6 col-lg-6">
          <div class="form-group">
            <label for="confirm">Confirm Password</label>
            <input type="password"
                   class="form-control"
                   name="confirm"
                   [(ngModel)]="form.confirm"
                   required
                   minlength="6"
                   #confirm="ngModel" />
            <div class="alert-danger" *ngIf="f.submitted && confirm.invalid">
              <div *ngIf="confirm.errors.required">Confirm the password</div>
            </div>
            <div class="alert-danger" *ngIf="f.submitted && form.password != form.confirm">
              Passwords must match
            </div>
          </div>
        </div>
      </div>

      <div class="row">
        <div class="col-xs-12 col-sm-12 col-md-6 col-lg-6">
          <div class="form-group">
            <label for="city">City</label>
            <input type="text"
                   class="form-control"
                   name="city"
                   [(ngModel)]="form.city"
                   required
                   #city="ngModel" />
            <div class="alert-danger" *ngIf="f.submitted && city.invalid">
              <div *ngIf="city.errors.required">City is required</div>
            </div>
          </div>
        </div>
        <div class="col-xs-12 col-sm-12 col-md-6 col-lg-6">
          <label for="role">Sign up as:</label>
          <br />
          <div class="form-check form-check-inline">
            <input class="form-check-input" type="radio"
                   value="0"
                   id="artist"
                   name="role"
                   [(ngModel)]="form.role"
                   required
                   #role="ngModel">
            <label class="form-check-label" for="artist">Artist</label>
          </div>
          <div class="form-check form-check-inline">
            <input type="radio"
                   value="1"
                   id="coworker"
                   class="form-check-input"
                   name="role"
                   [(ngModel)]="form.role"
                   required
                   #role="ngModel" />
            <label class="form-check-label" for="coworker">Coworker</label>
          </div>
        </div>
      </div>

      <div class="text-right">
        <button class="btn btn-success"><i class="fas fa-paper-plane mr-2"></i>Sign Up</button>
      </div>
    </form>
  </div>
</div>
